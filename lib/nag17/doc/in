                    NAG Fortran Library, Mark 17
 
                             FLIB617DA
 
               IBM RISC System/6000 Double Precision
 
                         Installers' Note
 
 
 
 
                             Contents
 
 
1. Introduction
 
2. Implementation Provided
 
   2.1. Applicability
   2.2. Derivation
 
3. Distribution Medium
 
   3.1. Recording Details
   3.2. Contents
   3.3. File Sizes
 
4. Library Installation and Maintenance
 
   4.1. Installation
   4.2. Checking Accessibility
   4.3. Release to Users
   4.4. Site-dependent Modifications
 
        4.4.1. Output unit dependencies (X04)
        4.4.2. Block size for LAPACK routines (F07/F08)
 
   4.5. Further Testing
   4.6. Maintenance
   4.7. Y Routines
 
5. Additional Services from NAG
 
6. Support from NAG
 
7. NAG Users Association
 
1. Introduction
 
   This document is essential reading for the NAG Site Contact responsible for 
   installation and maintenance of the NAG Fortran Library Implementation 
   specified in the title. The installer will be supplied with a printed copy 
   of this document. A tabbed divider has been provided near the beginning of
   Volume 1 of the NAG Fortran Library Manual, indicating a suitable place to 
   store the document, should you so wish. Both this and the Users' Note are 
   supplied on the distribution medium.
 
   Whenever the NAG Fortran Library has been supplied in compiled form, that 
   form is considered to be the standard library file. The use of all supplied 
   software must be in accordance with the terms and conditions of the Software
   Licence signed by NAG and each site. In particular, users must not have free 
   access to the text of the library routines. Any request to use NAG software 
   on a computer other than the one licenced must be referred to NAG (see
   Section 6).
 
2. Implementation Provided
 
2.1. Applicability

     This implementation is a compiled, tested, ready-to-use version of the 
     NAG Fortran Library that is considered suitable for operation on the 
     computer systems detailed below:
 
         hardware:         IBM RISC System/6000
         operating system: AIX v3.2
         Fortran compiler: XL FORTRAN Compiler/6000 v2 or later
         utilities:        XL C Compiler/6000
 
     For information about implementations of the NAG Fortran Library for use 
     on other computer systems please contact NAG.
 
2.2. Derivation

     This implementation was produced at NAG Ltd., Oxford on the computing 
     system detailed below:

         hardware:         IBM RISC System/6000 Model 530H
         operating system: AIX v3.2
         Fortran compiler: XL Fortran Compiler/6000 v2.3
         utilities:        XL C Compiler/6000

     The entire NAG Fortran Library, Mark 17, was compiled with full
     optimization (-O3).

     This library has been tested using the Basic Linear Algebra Subprograms 
     (BLAS) and linear algebra routines (LAPACK) provided by NAG (see the 
     Chapter Introductions for F06, F07 and F08 in the NAG Fortran Library 
     Manual). It has also been tested with the AIX BLAS library and with
     the IBM Engineering and Scientific Subroutine Library (ESSL).
 
3. Distribution Medium
 
3.1. Recording Details
 
     The implementation is distributed in tar format on 8mm DAT cartridges,
     unless otherwise indicated on the medium and accompanying despatch note.
 
     For further details, refer to other documentation supplied or contact NAG
     (see Section 6).
 
3.2. Contents
 
     The following shows the directory/file organization of the materials on 
     the distribution medium. A brief description of some of the files is 
     given.

                           |-- in                 (Installers' Note)
                           |-- nag_fl_un.3        (Users' Note, man page
                           |                       form)
                           |-- blas_lapack_to_nag (BLAS/F06, LAPACK/F07 and
                           |                       LAPACK/F08 listing)
                           |-- nag_to_blas_lapack (F06/BLAS, F07/LAPACK and 
                           |                       F08/LAPACK listing)
                           |-- essint             (Essential Introduction to 
                           |                       the NAG Fortran Library)
                 |-- doc --|-- summary            (brief summary of 
                 |         |                       routines)
                 |         |-- news               (outline of new and
                 |         |                       enhanced routines
                 |         |                       available at Mark 17)
                 |         |-- replaced           (a list of withdrawn
                 |         |                       routines, together with
                 |         |                       recommended replacements)
                 |         |-- calls              (a list of routines called 
                 |         |                       by each Library routine 
                 |         |                       and example program)
                 |         |-- called             (for each Library routine, 
                 |                                 a list of routines and 
                 |                                 example programs which 
                 |                                 call it)
                 |
                 |-- libnag.a (compiled library)
                 |
                 |-- libnag_u.a (compiled library, external names having
                 |               appended underscore)
     flib617da --|
                 |              |-- source ---|-- ??????e.f
                 |-- examples --|-- data -----|-- ??????e.d
                 |              |-- results --|-- ??????e.r
                 |
                 |-- source ----|-- [a-y] ------------|-- ??????t.f
                 |              |-- use_aix_blasobj --|-- ??????t.o
                 |              |-- use_esslobj ------|-- ??????t.o
                 |
                 |-- scripts ---|-- * (shell scripts are provided to run
                                       example programs, difference the
                                       results with those provided; others
                                       re-compile and re-build the library)

     This implementation includes two compiled libraries:
 
     libnag.a   - The complete NAG Library.
 
     libnag_u.a - The complete NAG Library with all routines compiled using
                  the -qextname compiler option to append an underscore to
                  external names. This is supplied to ease the porting of
                  C programs which call the NAG Fortran Library from systems
                  which use this convention to AIX. This variant of the
                  library may not be included in future marks of this
                  implementation. Please contact NAG if you wish it to be
                  included.

     The files in source/use_aix_blasobj and source/use_esslobj are supplied
     so that a shareable form of the NAG Library using the AIX BLAS library and 
     the IBM Engineering and Scientific Subroutine Library (ESSL) may be built.

3.3. File Sizes
 
     The files require the following disk space:
 
         compiled library:                8.5 Mb each
         example program material:        3.9 Mb
         documentation files:             2.2 Mb
         scripts:                         224 kb
         library source and object code: 14.4 Mb
            (not needed on disk permanently)
 
4. Library Installation and Maintenance
 
4.1. Installation
 
     To install all primary material (to be made available to users), use 
     the UNIX tar utility to read documentation, compiled libraries, and 
     examples, e.g.

     tar xf /dev/rst8 flib617da/doc flib617da/libnag.a \
                      flib617da/examples flib617da/scripts/nagexample 

     The object library (libnag.a) should be moved to either /usr/lib or 
     /usr/local/lib, if possible, so that linkage is convenient.
     After the object library is in place, run ranlib, e.g.

     ranlib -t /usr/local/lib/libnag.a

     The script nagexample refers to the local directory containing the 
     example programs. The file should be copied to (for example) 
     /usr/local/bin, modified to reflect the local installation, and its 
     protection set to world execute.

     The man page should be moved to the appropriate directory, e.g.

     cd doc
     mv nag_fl_un.3 /usr/local/man/man3

     To install the two supplied libraries and material to build shareable
     libraries, use the UNIX tar utility, e.g.

     tar xf /dev/rst8 flib617da/doc flib617da/libnag.a flib617da/libnag_u.a \
                      flib617da/scripts flib617da/source/use_aix_blasobj \
                      flib617da/source/use_esslobj

     To install all material (including source), use the UNIX tar utility,
     e.g.

     tar xf /dev/rst8 

     Source should be needed only when site-dependent modifications are
     envisaged (see Section 4.4), for updating to a later maintenance level 
     (see Section 4.6) or for reference by the NAG Site Contact. This 
     material should not be made available to users.

4.1.1. Shareable Library Installation

       A script is provided which can be used to build a shareable form of 
       the NAG Library (using libnag.a or libnag_u.a). It is located in the
       scripts directory and must be executed from this directory. To build 
       a shareable library from the underscore appended library use:

       ./make_shlib -u

       To build a shareable library from libnag.a use:

       ./make_shlib <option>

       where <option> is one of:
  
       -n : the shareable library will use NAG BLAS and LAPACK
       -b : the shareable library will use the AIX BLAS library
       -e : the shareable library will use BLAS and LAPACK routines from 
            the AIX BLAS library and ESSL.
 
       The shared object library will be placed in the same directory as 
       the original library. It should be moved to either /usr/lib or 
       /usr/local/lib, if possible, so that linkage is convenient.

4.2. Checking Accessibility
 
     The installer should ensure that the advice given to users in the section 
     "Accessing the Library" in the Users' Note is suitable for the 
     installation. This can be done by running a few example programs following
     that advice; a suitable sample would be A02AAF, G05FFF and X03AAF. The 
     installation can also be tested using the script nagexample.
 
     If the user advice refers to more than one compiled NAG library then 
     each should be checked as above. If any externally-provided library of 
     Basic Linear Algebra Subprograms (BLAS) is to be used then the 
     following example programs should also be run:

     F06EAF - testing real Level 1 BLAS
     F06GAF - testing complex Level 1 BLAS
     F06ERF - testing real sparse Level 1 BLAS
     F06GRF - testing complex sparse Level 1 BLAS
     F06PAF - testing real Level 2 BLAS
     F06SAF - testing complex Level 2 BLAS
     F06YAF - testing real Level 3 BLAS
     F06ZAF - testing complex Level 3 BLAS

     Note that the last four example programs take longer to execute than 
     the average example program. The Users' Note may contain extra
     information needed when running these tests.

4.3. Release to Users
 
     The supplied Users' Note should be checked and amended as necessary 
     (particularly the section "Accessing the Library"). It can then be made 
     available to users directly, or be absorbed into local access information. 
     The Users' Note is provided in man page form in nag_fl_un.3.
 
     The following material should also be made accessible to users:
 
     documentation files:
         doc/essint
         doc/summary
         doc/news
         doc/replaced
         doc/calls
         doc/called
     compiled library:
         libnag.a
     other compiled libraries if required:
         libnag_u.a
         libnag_sh.a
         libnag_u_sh.a
         libnag_b_sh.a
         libnag_e_sh.a
     example program material:
         examples/source/??????e.f
         examples/data/??????e.d
         examples/results/??????e.r
         scripts/nagexample
 
     Note that the example material has been adapted, if necessary, from that 
     printed in the NAG Fortran Library Manual, so that programs are suitable 
     for execution with this implementation with no further changes (but see 
     Section 4.5 for comments about possible differences in results obtained). 
     Making the supplied example material directly available to users provides 
     them with easily adaptable templates for their own problems.
 
4.4. Site-dependent Modifications
 
4.4.1. Output unit dependencies (X04)
 
       Certain NAG routines use explicit WRITE statements to produce output 
       directly. The choice of output unit used can be controlled by using 
       X04AAF and X04ABF, described in the NAG Fortran Library Manual. The 
       defaults for this implementation are given in the Users' Note supplied.
 
       Sites may decide to change the defaults by modifying either or both of 
       the X04 routines and placing the revised versions in the compiled 
       library. In this case, the Users' Note should be amended appropriately.
 
4.4.2. Block size for LAPACK routines (F07/F08)
 
       The performance of some routines in the F07 and F08 chapters (derived 
       from the LAPACK project) depends on a machine-dependent parameter
       referred to as the block-size. Different values are used by different 
       routines in the F07 and F08 chapters. These routines obtain a value for 
       the block-size by calling an auxiliary routine F07ZAZ. Suitable values 
       are inserted in F07ZAZ during implementation, and it is unlikely that 
       there will be any need to change them. However if the machine at your 
       site has very different characteristics from the machine on which the 
       implementation was carried out, or if you suspect that the performance 
       of the F07 or F08 routines is not as good as it should be, then you may 
       wish to consider modifying the values in F07ZAZ. Please consult NAG 
       before doing so, in order that we can advise you on how best to do this.
 
4.5. Further Testing
 
     An installer may choose to embark on a major revalidation exercise if 
     desired. This is advisable if the site uses a compiling system very 
     different from that implied by Section 2.2 above. Such a revalidation may 
     involve re-running all the example programs, preferably with some facility 
     for automatic comparison of results.
 
     The example results distributed were generated at Mark 17, using the 
     software described in Section 2.2. These example results may not be 
     exactly reproducible if the example programs are run in a slightly 
     different environment (for example, a different Fortran compiler, a 
     different compiler library, different arithmetic hardware, or a different 
     set of BLAS or LAPACK routines). The results which are most sensitive to 
     such differences are: eigenvectors (which may differ by a scalar multiple, 
     often -1, but sometimes complex); numbers of iterations and function 
     evaluations; and residuals and other "small" quantities of the same order 
     as the machine precision.
 
     The 'example programs' supplied for the routines in the F06 chapter are 
     not typical example programs and they are not in the Library Manual. They 
     are test programs, which are supplied to sites for use in an installation
     test of the Library. Some of them take much longer to run than other 
     example programs. Routines which are equivalent to BLAS, are tested twice: 
     once when called by their NAG F06 names, and once when called by their
     BLAS names.
 
     Further advice on this exercise can be obtained from NAG (see Section 6).
 
4.6. Maintenance
 
     The maintenance level of the supplied library can be determined either by 
     inspecting the source of routine A00AAZ or by writing a simple program to 
     call A00AAF, which prints out details of the implementation, including 
     name and implementation code, compiler and precision used, Mark and 
     maintenance level.
 
     From time to time, NAG will issue a software maintenance bulletin which 
     will advise on the steps necessary to move to a later level of 
     maintenance. The primary purpose of this bulletin is to inform sites about 
     known errors in the library. Details of corrections are supplied in case 
     the errors are causing serious inconvenience. Contractually a site is not 
     obliged to apply the corrections, which will be incorporated in the next 
     version of the library supplied by NAG, but may choose to do so if it
     wishes. In the latter case it is important that the source and compiled 
     version of A00AAZ are modified to reflect any such change of Mark and
     maintenance level. Instructions will be given in the bulletins. NAG 
     expects a site to inform its users about the errors described in the 
     bulletin whichever course of action it chooses to adopt.
 
     To update the compiled library the installer should compile the 
     modified source, and replace the older versions of these objects in the
     supplied library with the new. This can be done using the UNIX ar and
     ranlib utilities, e.g.

     ar ruvl /usr/local/lib/libnag.a *.o
     ranlib /usr/local/lib/libnag.a
 
4.7. Y Routines
 
     The installer or user might notice references to routines beginning with Y
     in the supplied source, compiled library etc. These routines are called 
     only by the stringent test programs NAG uses when testing each
     implementation; they are not called by any Library routines and can be 
     ignored.
 
5. Additional Services from NAG
 
   (a) Printed Manuals
 
       Where a manual has been provided as part of the contract issue, this 
       manual is updated automatically at each new release of the software, by 
       the supply of a manual update set or a complete new manual. If 
       additional manuals have been ordered in the past then updates to these 
       manuals may be ordered separately. They are NOT sent automatically. 
       Additional complete manuals and the manual updates (where relevant) are 
       available at prices published in the NAG documentation order form.
 
   (b) On-line Information Supplement
 
       To complement the manuals NAG produces an On-line Information Supplement 
       which fulfils two roles:
 
       - it gives keyword-driven guidance on the selection of the appropriate 
         NAG routine
       - it gives abbreviated on-line documentation of the NAG routines, to 
         enable the user to call the routines and investigate any IFAIL 
         messages without recourse to the manual
 
6. Support from NAG
 
   (a) Contact with NAG
 
       Queries concerning this document or the implementation generally should
       be directed initially to your local Advisory Service. If you have 
       difficulty in making contact locally, you can write to NAG directly, at 
       one of the supplied addresses. Users subscribing to the support service 
       are encouraged to contact one of the NAG Response Centres (see below).
 
   (b) NAG Response Centres
 
       The NAG Response Centres are available for general enquiries from all 
       users and also for technical queries from sites with an annually 
       licensed product or support service.
 
       The Response Centres are open during office hours, but contact is
       possible by fax, email and phone (answering machine) at all times.
 
       When contacting a Response Centre please quote your NAG user reference 
       and NAG product code.
 
   (c) Network
 
       Network, NAG's newsletter, is produced quarterly and sent free of charge
       to sites with a supported product or service.
 
   (d) NAG Bulletin Board

       The NAG Bulletin Board is an information service providing items of
       interest to users and prospective users of NAG products and services. 
       The information is regularly updated and reviewed and includes 
       implementation availability, descriptions of products, downloadable 
       software and technical reports. The bulletin board can be contacted 
       using Gopher 

       Host=www.nag.co.uk, Port=70, Type=1, Path=1/

       or WWW
     
       http://www.nag.co.uk/
      
7. NAG Users Association
 
   NAGUA, the NAG Users Association, is a self-financing, non-profitmaking 
   body. It exists to promote communications between NAG and users of its
   products and services. It provides information to NAG on the requirements of
   users, who are in turn kept informed of developments in services. Membership 
   is available to any institution or individual holding a licence for any NAG 
   product or service.
 
   Members receive discounts on the registration fees at conferences and
   workshops. Members also receive 'NAGUA News', NAGUA's own newsletter.
 
   For an information pack and membership application form, please contact 
   NAGUA at the supplied address.

 
Appendix - supplied addresses
 
NAG Ltd
Wilkinson House
Jordan Hill Road
OXFORD  OX2 8DR                         NAG Ltd Response Centre
United Kingdom                          email: infodesk@nag.co.uk
 
Tel: +44 1865 511245                    Tel: +44 1865 311744
Fax: +44 1865 310139                    Fax: +44 1865 311755
 
NAG Inc
1400 Opus Place, Suite 200
Downers Grove
IL 60515-5702                           NAG Inc Response Center
USA                                     email: infodesk@nag.com
 
Tel: +1 708 971 2337                    Tel: +1 708 971 2345
Fax: +1 708 971 2706                    Fax: +1 708 971 2346
 
NAG GmbH
Schleissheimerstrasse 5
D-85748 Garching
Germany
 
Tel: +49 89 3207395
Fax: +49 89 3207396
 
 
 
NAG Users Association
PO Box 426
OXFORD  OX2 8SD
United Kingdom
email: nagua@nag.co.uk
 
Tel: +44 1865 311102
